var spellData = {
    "accio":
    {
        "description": "brings an object to you",
        "type": "charm",
        "total": 33,
        "lines": [["4",3994],["4",4020],["4",4020],["4",4020],["4",20628],["4",21034],["4",28184],["4",40145],["5",26984],["5",34394],["5",45818],["5",48106],["5",55559],["5",56070],["5",56630],["5",57000],["5",57651],["5",57651],["6",9757],["6",34806],["6",36130],["7",3182],["7",5100],["7",5589],["7",9105],["7",12103],["7",12998],["7",14152],["7",16540],["7",16540],["7",18062],["7",26471],["7",27239]]
    },
    "aguamenti":
    {
        "description": "creates a gush of water from the tip of the spell caster's wand",
        "type": "conjuration",
        "total": 10,
        "lines": [["6",13638],["6",35651],["6",35666],["6",35678],["6",35678],["6",35678],["6",37568],["6",37574],["6",37580],["7",31221]]
    },
    "alohomora":
    {
        "description": "opens locks",
        "type": "charm",
        "total": 7,
        "lines": [["1",9930],["1",17498],["3",26102],["5",36690],["5",46956],["5",55001],["6",9951]]
    },
    "anapneo":
    {
        "description": "clears the target's airways",
        "type": "healing spell",
        "total": 1,
        "lines": [["6",9062]]
    },
    "aparecium":
    {
        "description": "makes invisible ink become visible",
        "type": "charm",
        "total": 1,
        "lines": [["2",14470]]
    },
    "avada kedavra":
    {
        "description": "kills your opponent",
        "type": "unforgivable curse",
        "total": 22,
        "lines": [["4",12839],["4",12852],["4",12870],["4",12945],["4",12961],["4",13100],["4",38368],["4",39633],["4",39803],["5",6892],["5",7197],["5",57732],["6",22838],["6",37006],["6",38053],["7",820],["7",3580],["7",16728],["7",16819],["7",31171],["7",31195],["7",36734]]
    },
    "avis":
    {
        "description": "makes birds fly out of the end of your wand",
        "type": "conjuration",
        "total": 1,
        "lines": [["4",18499]]
    },
    "cave inimicum":
    {
        "description": "strengthens an enclosure from enemies",
        "type": "spell",
        "total": 2,
        "lines": [["7",13172],["7",21057]]
    },
    "colloportus":
    {
        "description": "closes a door and binds it so that it can't be opened",
        "type": "charm",
        "total": 3,
        "lines": [["5",55909],["5",56555],["5",56584]]
    },
    "confringo":
    {
        "description": "causes the item targeted to explode",
        "type": "curse",
        "total": 2,
        "lines": [["7",3044],["7",16610]]
    },
    "confundus":
    {
        "description": "confounds your target, or makes them temporarily confused",
        "type": "charm",
        "total": 3,
        "lines": [["3",24267],["4",16698],["7",430]]
    },
    "conjunctivitus":
    {
        "description": "damages the eyesight of your opponent, making them seem to have pink eye",
        "type": "curse",
        "total": 1,
        "lines": [["4",24280]]
    },
    "crucio":
    {
        "description": "tortures your opponent mercilessly",
        "type": "unforgivable curse",
        "total": 15,
        "lines": [["4",12787],["4",34648],["4",37676],["4",38996],["4",39518],["5",51628],["5",56846],["5",57550],["5",57574],["6",37165],["6",37165],["7",23055],["7",29153],["7",31149],["7",35899]]
    },
    "defodio":
    {
        "description": "carves through material",
        "type": "charm",
        "total": 1,
        "lines": [["7",26655]]
    },
    "deletrius":
    {
        "description": "erases the last spell cast by a wand so that it can't be discovered",
        "type": "counter-spell",
        "total": 1,
        "lines": [["4",7974]]
    },
    "densaugeo":
    {
        "description": "makes teeth grow out of control",
        "type": "hex",
        "total": 1,
        "lines": [["4",17806]]
    },
    "deprimo":
    {
        "description": "blasts holes in ground",
        "type": "charm",
        "total": 1,
        "lines": [["7",21019]]
    },
    "diffindo":
    {
        "description": "makes seams split open, severs an object into two pieces",
        "type": "charm",
        "total": 7,
        "lines": [["4",20209],["5",56683],["6",13759],["7",8106],["7",8110],["7",12675],["7",18116]]
    },
    "dissendium":
    {
        "description": "opens a specific passageway into a cellar",
        "type": "charm",
        "total": 4,
        "lines": [["3",12119],["3",12123],["3",17253],["3",20226]]
    },
    "duro":
    {
        "description": "turns an item to stone",
        "type": "charm",
        "total": 1,
        "lines": [["7",31836]]
    },
    "engorgio":
    {
        "description": "makes an item larger, as in swollen",
        "type": "charm",
        "total": 2,
        "lines": [["4",12779],["7",19467]]
    },
    "episkey":
    {
        "description": "heals relatively minor wounds",
        "type": "healing spell",
        "total": 2,
        "lines": [["6",9844],["6",17746]]
    },
    "erecto":
    {
        "description": "erects a structure",
        "type": "charm",
        "total": 1,
        "lines": [["7",13164]]
    },
    "expecto patronum":
    {
        "description": "creates a Patronus",
        "type": "charm",
        "total": 37,
        "lines": [["3",14832],["3",14836],["3",14836],["3",14846],["3",14846],["3",14846],["3",14886],["3",14886],["3",14983],["3",14983],["3",15080],["3",15080],["3",15082],["3",16356],["3",23990],["3",23992],["3",24004],["3",24004],["3",24018],["3",24020],["3",24030],["3",24045],["3",24057],["3",24083],["3",24085],["3",25910],["4",37470],["5",1178],["5",1196],["5",1230],["5",50795],["7",12653],["7",12715],["7",12721],["7",27348],["7",27423],["7",34071]]
    },
    "expelliarmus":
    {
        "description": "disarms the target of the spell",
        "type": "charm",
        "total": 27,
        "lines": [["2",11666],["2",14824],["2",18557],["3",21065],["3",21356],["3",22541],["3",23879],["4",38034],["4",39627],["4",39803],["5",28340],["5",28348],["5",28385],["5",28403],["5",28568],["5",46049],["5",56012],["6",36254],["6",36262],["7",3072],["7",3580],["7",3600],["7",10580],["7",17136],["7",23360],["7",31185],["7",36736]]
    },
    "expulso":
    {
        "description": "blows things up",
        "type": "curse",
        "total": 1,
        "lines": [["7",8092]]
    },
    "ferula":
    {
        "description": "binds a broken limb with a splint and bandages",
        "type": "healing spell",
        "total": 1,
        "lines": [["3",23507]]
    },
    "fidelius":
    {
        "description": "allows a secret to be hidden within the secret keeper's soul",
        "type": "charm",
        "total": 9,
        "lines": [["3",12734],["3",12790],["7",4528],["7",13059],["7",15499],["7",15943],["7",16679],["7",23796],["7",25745]]
    },
    "finite incantatem":
    {
        "description": "stops any spell",
        "type": "counter-spell",
        "total": 5,
        "lines": [["2",11790],["4",39587],["4",41836],["7",11791],["7",24504]]
    },
    "flagrate":
    {
        "description": "allows the user to write or draw in the air with fire",
        "type": "charm",
        "total": 1,
        "lines": [["5",54785]]
    },
    "furnunculus":
    {
        "description": "causes a person to break out in boils",
        "type": "jinx",
        "total": 1,
        "lines": [["4",43815]]
    },
    "geminio":
    {
        "description": "creates a duplicate of an item",
        "type": "conjuration",
        "total": 1,
        "lines": [["7",12685]]
    },
    "glisseo":
    {
        "description": "turns stairs into a slide",
        "type": "charm",
        "total": 1,
        "lines": [["7",31824]]
    },
    "homenum revelio":
    {
        "description": "reveals the presence of other humans",
        "type": "charm",
        "total": 2,
        "lines": [["7",8373],["7",20952]]
    },
    "homorphus":
    {
        "description": "makes a werewolf or person disguised as an animal resume their human shape",
        "type": "charm",
        "total": 1,
        "lines": [["2",10015]]
    },
    "impedimenta":
    {
        "description": "puts up an impediment that slows down something or someone that is coming toward you",
        "type": "jinx",
        "total": 13,
        "lines": [["4",37634],["4",37640],["4",38016],["4",40114],["5",29702],["5",32682],["5",46059],["5",56177],["5",57079],["6",35730],["6",37170],["6",37319],["7",3020]]
    },
    "imperio":
    {
        "description": "allows the user to assume complete control of another person",
        "type": "unforgivable curse",
        "total": 8,
        "lines": [["4",12680],["4",13876],["4",39714],["7",26099],["7",26117],["7",26210],["7",26287],["7",29224]]
    },
    "impervius":
    {
        "description": "repels water from a surface",
        "type": "charm",
        "total": 6,
        "lines": [["3",11034],["5",27362],["5",27368],["5",27380],["7",11795],["7",26525]]
    },
    "incarcerous":
    {
        "description": "conjures up ropes",
        "type": "conjuration",
        "total": 2,
        "lines": [["5",53528],["6",35730]]
    },
    "incendio":
    {
        "description": "lights a fire",
        "type": "conjuration",
        "total": 3,
        "lines": [["4",2666],["6",37362],["6",38261]]
    },
    "langlock":
    {
        "description": "sticks tongue to roof of the mouth",
        "type": "jinx",
        "total": 1,
        "lines": [["6",26207]]
    },
    "legilimens":
    {
        "description": "allows the user to gain access to another's mind and memories",
        "type": "charm",
        "total": 7,
        "lines": [["5",38384],["5",38493],["5",38560],["5",42251],["5",42346],["5",58975],["6",1584]]
    },
    "levicorpus":
    {
        "description": "turns your opponent upside down and dangles them in thin air",
        "type": "jinx",
        "total": 6,
        "lines": [["6",14800],["6",14819],["6",20986],["6",24519],["6",32229],["7",26513]]
    },
    "liberacorpus":
    {
        "description": "frees a body that has been caught up by the levicorpus spell",
        "type": "counter-spell",
        "total": 1,
        "lines": [["6",14847]]
    },
    "locomotor":
    {
        "description": "levitates a target off the ground",
        "type": "charm",
        "total": 4,
        "lines": [["1",13809],["5",3763],["5",42614],["5",46214]]
    },
    "locomotor mortis":
    {
        "description": "locks an opponent's legs together",
        "type": "curse",
        "total": 2,
        "lines": [["1",13809],["5",46214]]
    },
    "lumos":
    {
        "description": "creates light",
        "type": "charm",
        "total": 22,
        "lines": [["2",16849],["2",18801],["3",1906],["3",12137],["3",16020],["3",20807],["4",7024],["4",29197],["4",33480],["4",37385],["5",1152],["5",3276],["5",49030],["6",3871],["6",34513],["6",38261],["7",8603],["7",16420],["7",17128],["7",18007],["7",26394],["7",34542]]
    },
    "meteolojinx recanto":
    {
        "description": "causes weather effects caused by incantations to cease",
        "type": "counter-spell",
        "total": 2,
        "lines": [["7",12293],["7",12295]]
    },
    "mobiliarbus":
    {
        "description": "used to move a tree from one place to another",
        "type": "charm",
        "total": 1,
        "lines": [["3",12505]]
    },
    "mobilicorpus":
    {
        "description": "used to move a body from one place to another",
        "type": "charm",
        "total": 1,
        "lines": [["3",23533]]
    },
    "morsmordre":
    {
        "description": "used to summon the Dark Mark",
        "type": "curse",
        "total": 1,
        "lines": [["4",7495]]
    },
    "muffliato":
    {
        "description": "causes a buzzing noise to surround a limited area",
        "type": "charm",
        "total": 11,
        "lines": [["6",14780],["6",14786],["6",17444],["6",26155],["6",26252],["6",31710],["7",11955],["7",12531],["7",13138],["7",14114],["7",14116]]
    },
    "nox":
    {
        "description": "extinguishes light",
        "type": "counter-spell",
        "total": 2,
        "lines": [["3",21007],["7",32315]]
    },
    "obliviate":
    {
        "description": "erases a person's memories of an event",
        "type": "charm",
        "total": 4,
        "lines": [["2",18892],["4",4523],["7",8163],["7",21017]]
    },
    "obscuro":
    {
        "description": "blindfolds target",
        "type": "conjuration",
        "total": 1,
        "lines": [["7", 14493]]
    },
    "oppugno":
    {
        "description": "assaults target with directed object(s)",
        "type": "jinx",
        "total": 1,
        "lines": [["6",18791]]
    },
    "orchideous":
    {
        "description": "conjures a bunch of flowers from the user's wand",
        "type": "conjuration",
        "total": 1,
        "lines": [["4",18439]]
    },
    "petrificus totalus":
    {
        "description": "petrifies an opponent totally",
        "type": "curse",
        "total": 10,
        "lines": [["1",17071],["5",56208],["5",56285],["5",57016],["6",9591],["6",35716],["6",35728],["6",37109],["6",37149],["7",8098]]
    },
    "piertotum locomotor":
    {
        "description": "animates target",
        "type": "charm",
        "total": 2,
        "lines": [["7",29586],["7",29606]]
    },
    "point me":
    {
        "description": "makes the user's wand act like a compass",
        "type": "charm",
        "total": 1,
        "lines": [["4",37421]]
    },
    "portus":
    {
        "description": "turns any item into a portkey",
        "type": "charm",
        "total": 2,
        "lines": [["5",34002],["5",58102]]
    },
    "prior incantato":
    {
        "description": "reveals to you the last spell that a wand was used to cast",
        "type": "charm",
        "total": 1,
        "lines": [["4",7962]]
    },
    "protego":
    {
        "description": "protects the user, and sends a spell back on an opponent",
        "type": "charm",
        "total": 12,
        "lines": [["5",42271],["5",55563],["5",56988],["5",57606],["6",11269],["7",7860],["7",13138],["7",18721],["7",21049],["7",26297],["7",29540],["7",36432]]
    },
    "protego horribillis":
    {
        "description": "protects against darkest magic",
        "type": "charm",
        "total": 1,
        "lines": [["7",29540]]
    },
    "protego totalum":
    {
        "description": "shields an area",
        "type": "charm",
        "total": 2,
        "lines": [["7",13138],["7",21049]]
    },
    "quietus":
    {
        "description": "makes things quiet",
        "type": "charm",
        "total": 1,
        "lines": [["4",6781]]
    },
    "reducio":
    {
        "description": "shrinks an item",
        "type": "charm",
        "total": 3,
        "lines": [["4",12811],["4",37511],["7",19487]]
    },
    "reducto":
    {
        "description": "blasts solid objects into pieces",
        "type": "curse",
        "total": 3,
        "lines": [["5",55858],["6",36919],["6",36919]]
    },
    "relashio":
    {
        "description": "releases something from being constrained or held",
        "type": "jinx",
        "total": 5,
        "lines": [["4",29613],["6",13204],["7",12689],["7",23287],["7",26610]]
    },
    "rennervate":
    {
        "description": "used to wake up a stunned person",
        "type": "charm",
        "total": 2,
        "lines": [["6",35621],["6",35625]]
    },
    "reparo":
    {
        "description": "repairs broken items",
        "type": "charm",
        "total": 11,
        "lines": [["4",9975],["5",23806],["5",42305],["5",48387],["6",12882],["6",13761],["6",17576],["6",26369],["7",2998],["7",17120],["7",36980]]
    },
    "repello muggletum":
    {
        "description": "makes an area invisible to muggles",
        "type": "charm",
        "total": 1,
        "lines": [["7",13138]]
    },
    "revelio":
    {
        "description": "causes something that is hidden to be revealed",
        "type": "charm",
        "total": 4,
        "lines": [["6",12045],["6",23511],["7",8373],["7",20952]]
    },
    "rictusempra":
    {
        "description": "causes a person to curl up in laughter, as if being tickled",
        "type": "charm",
        "total": 1,
        "lines": [["2",11765]]
    },
    "riddikulus":
    {
        "description": "makes a boggart assume a “ridiculous” form",
        "type": "charm",
        "total": 17,
        "lines": [["3",8311],["3",8315],["3",8400],["3",8489],["3",8515],["3",8537],["3",8570],["3",8596],["3",8612],["3",8626],["3",15098],["4",37482],["5",12572],["5",12586],["5",12598],["5",12598],["5",12625]]
    },
    "salvio hexia":
    {
        "description": "deflects any hexes cast toward a specific location",
        "type": "charm",
        "total": 2,
        "lines": [["7",13138],["7",21049]]
    },
    "scourgify":
    {
        "description": "used to clean dirt or other material off of a surface",
        "type": "charm",
        "total": 3,
        "lines": [["5",3747],["5",13453],["5",46111]]
    },
    "sectumsempra":
    {
        "description": "causes lacerations to appear all over an opponent's body",
        "type": "curse",
        "total": 11,
        "lines": [["6",27863],["6",31704],["6",32019],["6",32251],["6",32728],["6",35738],["6",35738],["6",37976],["6",39430],["7",3699],["7",34126]]
    },
    "serpensortia":
    {
        "description": "conjures a snake",
        "type": "conjuration",
        "total": 1,
        "lines": [["2",11887]]
    },
    "silencio":
    {
        "description": "makes the target of the spell unable to make any sound",
        "type": "charm",
        "total": 8,
        "lines": [["5",27026],["5",27050],["5",27063],["5",27071],["5",27071],["5",27091],["5",27101],["5",56200]]
    },
    "sonorus":
    {
        "description": "amplifies the user's voice",
        "type": "charm",
        "total": 3,
        "lines": [["4",5987],["4",29476],["4",37347]]
    },
    "specialis revelio":
    {
        "description": "reveals spells cast on objects or potions",
        "type": "charm",
        "total": 2,
        "lines": [["6",12045],["6",23511]]
    },
    "stupefy":
    {
        "description": "knocks an opponent insensible temporarily",
        "type": "charm",
        "total": 27,
        "lines": [["4",7578],["4",19474],["4",37622],["4",37703],["4",38008],["4",38016],["4",38016],["4",38032],["4",38042],["4",40799],["5",45139],["5",55888],["5",55983],["5",56034],["5",56056],["5",56952],["5",57598],["6",37339],["7",2927],["7",8078],["7",12616],["7",12628],["7",22822],["7",22822],["7",23364],["7",23433],["7",26598]]
    },
    "tarantallegra":
    {
        "description": "forces an opponent's legs to dance uncontrollably",
        "type": "jinx",
        "total": 2,
        "lines": [["2",11784],["5",56978]]
    },
    "tergeo":
    {
        "description": "scours something clean",
        "type": "charm",
        "total": 3,
        "lines": [["6",10155],["7",4746],["7",16241]]
    },
    "waddiwasi":
    {
        "description": "removes a stuck object",
        "type": "jinx",
        "total": 1,
        "lines": [["3",8145]]
    },
    "wingardium leviosa":
    {
        "description": "allows the user to make an object levitate",
        "type": "charm",
        "total": 6,
        "lines": [["1",10662],["1",10676],["1",10989],["5",57473],["7",3008],["7",32256]]
    }
};

var spellList = {
  "accio" : {
    "description" : "brings an object to you",
    "type" : "charm" ,
  },
  "aguamenti" : {
    "description" : "creates a gush of water from the tip of the spell caster's wand",
    "type" : "conjuration"
  },
  "alohomora" : {
    "description" : "opens locks" ,
    "type" : "charm"
  },
  "anapneo" : {
    "description" : "clears the target's airways",
    "type": "healing spell"
  },
  "aparecium" : {
    "description" : "makes invisible ink become visible" ,
    "type" : "charm"
  },
  "avada kedavra" : {
    "description" : "kills your opponent",
    "type" : "unforgivable curse"
  },
  "avis" : {
    "description" : "makes birds fly out of the end of your wand",
    "type" : "conjuration"
  },
  "cave inimicum" : {
    "description" : "strengthens an enclosure from enemies",
    "type" : "spell"
  },
  "colloportus" : {
    "description" : "closes a door and binds it so that it can't be opened",
    "type" : "charm"
  },
  "confringo" : {
    "description" : "causes the item targeted to explode",
    "type" : "curse"
  },
  "confundus" : {
    "description" : "confounds your target, or makes them temporarily confused",
    "type" : "charm"
  },
  "conjunctivitus" : {
    "description" : "damages the eyesight of your opponent, making them seem to have pink eye",
    "type" : "curse"
  },
  "crucio" : {
    "description" : "tortures your opponent mercilessly" ,
    "type" : "unforgivable curse"
  },
  "defodio" : {
    "description" : "carves through material",
    "type" : "charm"
  },
  "deletrius" : {
    "description" : "erases the last spell cast by a wand so that it can't be discovered",
    "type" : "counter-spell"
  },
  "densaugeo" : {
    "description" : "makes teeth grow out of control",
    "type" : "hex"
  },
  "deprimo" : {
    "description" : "blasts holes in ground",
    "type" : "charm"
  },
  "diffindo" : {
    "description" : "makes seams split open, severs an object into two pieces",
    "type" : "charm"
  },
  "dissendium" : {
    "description" : "opens a specific passageway into a cellar",
    "type": "charm"
  },
  "duro" : {
    "description" : "turns an item to stone",
    "type" : "charm"
  },
  "engorgio" : {
    "description" : "makes an item larger, as in swollen",
    "type" : "charm"
  },
  "episkey" : {
    "description" : "heals relatively minor wounds",
    "type" : "healing spell"
  },
  "erecto" : {
    "description" : "erects a structure",
    "type" : "charm"
  },
  "expecto patronum" : {
    "description" : "creates a Patronus",
    "type" : "charm"
  },
  "expelliarmus" : {
    "description" : "disarms the target of the spell" ,
    "type" : "charm"
  },
  "expulso" : {
    "description" : "blows things up" ,
    "type" : "curse"
  },
  "ferula" : {
    "description" : "binds a broken limb with a splint and bandages",
    "type" : "healing spell"
  },
  "fidelius" : {
    "description" : "allows a secret to be hidden within the secret keeper's soul",
    "type" : "charm"
  },
  "finite incantatem" : {
    "description" : "stops any spell",
    "type" : "counter-spell"
  },
  "flagrate" : {
    "description" : "allows the user to write or draw in the air with fire",
    "type" : "charm"
  },
  "furnunculus" : {
    "description" : "causes a person to break out in boils",
    "type" : "jinx"
  },
  "geminio" : {
    "description" : "creates a duplicate of an item",
    "type" : "conjuration"
  },
  "glisseo" : {
    "description" : "turns stairs into a slide",
    "type" : "charm"
  },
  "homenum revelio" : {
    "description" : "reveals the presence of other humans",
    "type" : "charm"
  },
  "homorphus" : {
    "description" : "makes a werewolf or person disguised as an animal resume their human shape",
    "type" : "charm"
  },
  "impedimenta" : {
    "description" : "puts up an impediment that slows down something or someone that is coming toward you",
    "type" : "jinx"
  },
  "imperio" : {
    "description" : "allows the user to assume complete control of another person",
    "type" : "unforgivable curse"
  },
  "impervius" : {
    "description" : "repels water from a surface",
    "type" : "charm"
  },
  "incarcerous" : {
    "description" : "conjures up ropes",
    "type" : "conjuration"
  },
  "incendio" : {
    "description" : "lights a fire",
    "type" : "conjuration"
  },
  "langlock" : {
    "description" : "sticks tongue to roof of the mouth" ,
    "type" : "jinx"
  },
  "legilimens" : {
    "description" : "allows the user to gain access to another's mind and memories" ,
    "type" : "charm"
  },
  "levicorpus" : {
    "description" : "turns your opponent upside down and dangles them in thin air" ,
    "type" : "jinx"
  },
  "liberacorpus" : {
    "description" : "frees a body that has been caught up by the levicorpus spell",
    "type" : "counter-spell"
  },
  "locomotor" : {
    "description" : "levitates a target off the ground",
    "type" : "charm"
  },
  "locomotor mortis" : {
    "description" : "locks an opponent's legs together",
    "type" : "curse"
  },
  "lumos" : {
    "description" : "creates light",
    "type" : "charm"
  },
  "meteolojinx recanto" : {
    "description" : "causes weather effects caused by incantations to cease",
    "type" : "counter-spell"
  },
  "mobiliarbus" : {
    "description" : "used to move a tree from one place to another",
    "type" : "charm"
  },
  "mobilicorpus" : {
    "description" : "used to move a body from one place to another",
    "type" : "charm"
  },
  "morsmordre" : {
    "description" : "used to summon the Dark Mark",
    "type" : "curse"
  },
  "muffliato" : {
    "description" : "causes a buzzing noise to surround a limited area",
    "type" : "charm"
  },
  "nox" : {
    "description" : "extinguishes light",
    "type" : "counter-spell"
  },
  "obliviate" : {
    "description" : "erases a person's memories of an event",
    "type" : "charm"
  },
  "obscuro" : {
    "description" : "blindfolds target",
    "type" : "conjuration"
  },
  "oppugno" : {
    "description" : "assaults target with directed object(s)",
    "type" : "jinx"
  },
  "orchideous" : {
    "description" : "conjures a bunch of flowers from the user's wand",
    "type" : "conjuration"
  },
  "petrificus totalus" : {
    "description" : "petrifies an opponent totally",
    "type" : "curse"
  },
  "piertotum locomotor" : {
    "description" : "animates target",
    "type" : "charm"
  },
  "point me" : {
    "description" : "makes the user's wand act like a compass",
    "type" : "charm"
  },
  "portus" : {
    "description" : "turns any item into a portkey",
    "type" : "charm"
  },
  "prior incantato" : {
    "description" : "reveals to you the last spell that a wand was used to cast",
    "type" : "charm"
  },
  "protego" : {
    "description" : "protects the user, and sends a spell back on an opponent" ,
    "type" : "charm"
  },
  "protego horribillis" : {
    "description" : "protects against darkest magic" ,
    "type" : "charm"
  },
  "protego totalum" : {
    "description" : "shields an area" ,
    "type" : "charm"
  },
  "quietus" : {
    "description" : "makes things quiet",
    "type" : "charm"
  },
  "reducio" : {
    "description" : "shrinks an item",
    "type" : "charm"
  },
  "reducto" : {
    "description" : "blasts solid objects into pieces",
    "type" : "curse"
  },
  "relashio" : {
    "description" : "releases something from being constrained or held",
    "type" : "jinx"
  },
  "rennervate" : {
    "description" : "used to wake up a stunned person",
    "type" : "charm"
  },
  "reparo" : {
    "description" : "repairs broken items",
    "type" : "charm"
  },
  "repello muggletum" : {
    "description" : "makes an area invisible to muggles",
    "type" : "charm"
  },
  "revelio" : {
    "description" : "causes something that is hidden to be revealed",
    "type" : "charm"
  },
  "rictusempra" : {
    "description" : "causes a person to curl up in laughter, as if being tickled",
    "type" : "charm"
  },
  "riddikulus" : {
    "description" : "makes a boggart assume a “ridiculous” form",
    "type" : "charm"
  },
  "salvio hexia" : {
    "description" : "deflects any hexes cast toward a specific location",
    "type" : "charm"
  },
  "scourgify" : {
    "description" : "used to clean dirt or other material off of a surface",
    "type" : "charm"
  },
  "sectumsempra" : {
    "description" : "causes lacerations to appear all over an opponent's body",
    "type" : "curse"
  },
  "serpensortia" : {
    "description" : "conjures a snake",
    "type" : "conjuration"
  },
  "silencio" : {
    "description" : "makes the target of the spell unable to make any sound",
    "type" : "charm"
  },
  "sonorus" : {
    "description" : "amplifies the user's voice",
    "type" : "charm"
  },
  "specialis revelio" : {
    "description" : "reveals spells cast on objects or potions",
    "type" : "charm"
  },
  "stupefy" : {
    "description" : "knocks an opponent insensible temporarily",
    "type" : "charm"
  },
  "tarantallegra" : {
    "description" : "forces an opponent's legs to dance uncontrollably",
    "type" : "jinx"
  },
  "tergeo" : {
    "description" : "scours something clean",
    "type" : "charm"
  },
  "waddiwasi" : {
    "description" : "removes a stuck object",
    "type" : "jinx"
  },
  "wingardium leviosa" : {
    "description" : "allows the user to make an object levitate",
    "type" : "charm"
  },
};

var numOfSpell = 1;
var numOfDots = 0;

var spellTotals = {};

spellIter = 1;
for (var spell in spellData){ //Loop to fill up spellTotals
  newSpell = {};
  newSpell["name"] = spell;
  newSpell["total"] = spellData[spell]["total"];

  spellTotals[spellIter] = newSpell;
  spellIter++;
}
console.log(spellTotals);

function getDiffTypes(){
  var spellTypesSet = new Set();

  // Add each type of spell to the set
  for (var spell in spellList) {
    if (!spellTypesSet.has(spellData[spell]["type"])){
      spellTypesSet.add((spellData[spell]["type"]));
    }
  }

  // Create structure to hold main data
  var spellTypes = {};
  spellTypes["name"] = "spellTypes";
  spellTypes["children"] = []; // These children will be each spell type

  // Create empty arrays for each spelltype
  spellTypesSet.forEach(function(spellType) {

    var newSpellType = {};
    newSpellType["name"] = spellType;
    newSpellType["children"] = [] // These children will be each spell of that spell type

    spellTypes["children"].push(newSpellType);

  });

  // Fill each spell type with relevant spells
  for (var spell in spellData){

    var spellCategory = spellData[spell]["type"];

    //spell object to push
    var newSpell = {};
    newSpell["name"] = spell;
    newSpell["size"] = 1;

    // loop through all of children nodes and add to correct one
    for (var spellTypeIndex in spellTypes["children"]){
      if (spellTypes["children"][spellTypeIndex]["name"] == spellCategory){
        spellTypes["children"][spellTypeIndex]["children"].push(newSpell);
      }
    }
  }

  // console.log(spellTypes);
  return spellTypes;
}

function firstLetterUppercase(str){
  return str.charAt(0).toUpperCase() + str.slice(1);
}

function wrap(text, width) { //don't even use width!
    text.each(function () {
        var text = d3.select(this),
            letters = text.text().split('').reverse(),
            letter,
            line = [],
            lineNumber = 0,
            lineHeight = 1.1, // ems
            x = text.attr("x"),
            y = text.attr("y"),
            boundingWidth = Number(text.attr("class")),
            dy = 0, //parseFloat(text.attr("dy")),
            tspan = text.text(null)
                        .append("tspan")
                        .attr("x", x)
                        .attr("y", y)
                        .attr("dy", dy + "em");
        while (letter = letters.pop()) {
            line.push(letter);
            tspan.text(line.join(""));
            if (tspan.node().getComputedTextLength() > boundingWidth) {
                line.pop();
                tspan.text(line.join(""));
                line = [letter];
                tspan = text.append("tspan")
                            .attr("x", x)
                            .attr("y", y)
                            .attr("dy", ++lineNumber * lineHeight + dy + "em")
                            .text(letter);
            }
        }
    });
}

function formatSpellData(data){
  console.log(data);
  var newData = {};
  newData["data"] = [];

  for (var spell in data){
    var newSpell = {};
    newSpell["name"] = spell;
    newSpell["description"] = data[spell]["description"];
    newSpell["lines"] = data[spell]["lines"];
    newSpell["total"] = data[spell]["total"];
    newSpell["type"] = data[spell]["type"];

    newData["data"].push(newSpell);
  }

  console.log(newData);
  return newData;
}

function incrementNumofSpell(){ // a weird workaround
  console.log("numOfDots = " + numOfDots + " numOfSpell = " + numOfSpell);

  if (numOfDots > spellTotals[numOfSpell]["total"]){
    console.log("incremented numOfSpell");
    numOfSpell++;
    numOfDots = 1;
  }
  return numOfSpell;
}

function makeClassificationPage(){

  var spellTypes = getDiffTypes();

  // Fill section with background div
  var parentDiv = document.getElementById("page_Classification")

  var width = parentDiv.offsetWidth - 50;
  var height = parentDiv.offsetHeight;

  var backgroundSVG = document.createElementNS("http://www.w3.org/2000/svg", "svg");
    backgroundSVG.setAttributeNS(null, 'width', (width));
    backgroundSVG.setAttributeNS(null, 'height', (height));
    backgroundSVG.setAttribute('id', 'classificationSVG');

  var newSquare = document.createElementNS("http://www.w3.org/2000/svg","rect");
    newSquare.setAttributeNS(null, 'width', (width));
    newSquare.setAttributeNS(null, 'height', (height));
    newSquare.setAttributeNS(null, 'fill', 'white');

  backgroundSVG.appendChild(newSquare);
  parentDiv.appendChild(backgroundSVG);

  // Tooltip div

  var classificationTooltipDiv = d3.select("body").append("div")
    .attr("class", "tooltip")
    .style("opacity", 0);

  // Variables for sunburst

  var radius = ((Math.min(width, height)));
  var color = d3.scaleOrdinal(d3.schemePastel1);

  // Select SVG

  var parentSVG = d3.select('#classificationSVG')
    .append('g')
    .attr('transform', 'translate(' + (width / 2) + ',' + (height) + ') ' + 'rotate(-90 ' + 0 + ' ' + 0 + ')');

  // Use d3 helper functions to transform data

  var partition = d3.partition()
    .size([Math.PI, radius]);

  var root = d3.hierarchy(spellTypes)
    .sum(function (d) { return d.size});

  partition(root);

  // Calculate size of arcs for each node

  var arc = d3.arc()
    .startAngle(function (d) { return d.x0 })
    .endAngle(function (d) { return d.x1 })
    .innerRadius(function (d) { return d.y0 })
    .outerRadius(function (d) { return d.y1 })

  //Create groups for each rect and text to go in

  var groups = parentSVG.selectAll('g')
    .data(root.descendants())
    .enter()
    .append('svg:g')

  //Add rect to each group

  groups.append('path')
    .attr("display", function (d) { return d.depth ? null : "none"; })
    .attr("d", arc)
    .style('stroke', '#fff')
    .style("fill", function (d) { return color((d.children ? d : d.parent).data.name); })
    .on("mouseover", function(d) {
      if (d.depth == 2){
        classificationTooltipDiv.transition()
        .duration(200)
        .style("opacity", .9);
        classificationTooltipDiv.html(firstLetterUppercase(d.data.name) + " : " + firstLetterUppercase(spellList[d.data.name]["description"]))
        .style("left", (d3.event.pageX) + "px")
        .style("top", (d3.event.pageY - 28) + "px");
      }
    })
    .on("mouseout", function(d) {
        classificationTooltipDiv.transition()
            .duration(500)
            .style("opacity", 0);
    });

  // Add text to each group

  groups.append("svg:text")
    .attr("transform", function(d){return "translate(" + arc.centroid(d) + ")" + "rotate(" + (d.x0/2 + d.x1 / 2 - Math.PI / 2) / Math.PI * 180 + ") ";})
    .attr("x", function(d) { return Math.sqrt(d.y0); })
    .attr("x1", "6") // margin
    .attr("y1", ".35em") // vertical-align
    .attr("text-anchor", "middle")
    .attr("dominant-baseline", "middle")
    .text(function(d) {
      if (d.data.name == "spellTypes"){
        return "";
      }
      else {
        return d.data.name;
      }
    });
}

function makeMostUsedPage(){

  var spellTypes = getDiffTypes();

  // Add in totals to the data structure

  for (spellType in spellTypes["children"]){
    for (spell in spellTypes["children"][spellType]["children"]){
      spellTypes["children"][spellType]["children"][spell]["size"] = spellData[spellTypes["children"][spellType]["children"][spell]["name"]]["total"];
    }
  }

  // Fill with background div

  var parentDiv = document.getElementById("page_MostUsed")

  var width = parentDiv.offsetWidth - 50;
  var height = parentDiv.offsetHeight;

  var backgroundSVG = document.createElementNS("http://www.w3.org/2000/svg", "svg");
    backgroundSVG.setAttributeNS(null, 'width', (width));
    backgroundSVG.setAttributeNS(null, 'height', (height));
    backgroundSVG.setAttribute('id', 'mostUsedSVG');

  var newSquare = document.createElementNS("http://www.w3.org/2000/svg","rect");
    newSquare.setAttributeNS(null, 'width', (width));
    newSquare.setAttributeNS(null, 'height', (height));
    newSquare.setAttributeNS(null, 'fill', 'white');
    newSquare.setAttributeNS(null, 'stroke', 'white');
    newSquare.setAttributeNS(null, 'stroke-width', 3);

  backgroundSVG.appendChild(newSquare);

  parentDiv.appendChild(backgroundSVG);

  // Tooltip div
  var mostUsedTooltipDiv = d3.select("body").append("div")
  .attr("class", "tooltip")
  .style("opacity", 0);

  // Set variables for treemap
  var color = d3.scaleOrdinal(d3.schemePastel1);
  var parentSVG = d3.select('#mostUsedSVG');


  // Create hierarchy

  var root = d3.hierarchy(spellTypes)
    .sum(function (d) { return d.size});

  var treemap = d3.treemap()
    .size([width, height])
    .padding(2);

  treemap(root);

  // Create g element for each box
  const leaf = parentSVG.selectAll("g")
    .data(root.leaves())
    .enter()
    .append("g")
      .attr("transform", d => `translate(${d.x0},${d.y0})`)
      .attr("id", d => {return "leaf"+d.data.name});

  // Create <title> as spellname
  leaf.append("title")
      .text(d => d.data.name);

  // Add in box
  leaf.append("rect")
      .attr("id", d => (d.leafUid = "rect"+d.data.name))
      .attr("fill", d => { while (d.depth > 1) d = d.parent; return color(d.data.name); })
      .attr("fill-opacity", 0.6)
      .attr("width", d => d.x1 - d.x0)
      .attr("height", d => d.y1 - d.y0)
      .on("mouseover", function(d) {
          mostUsedTooltipDiv.transition()
          .duration(200)
          .style("opacity", .9);
          mostUsedTooltipDiv.html(
            firstLetterUppercase(d.data.name) + " : " +
            firstLetterUppercase(spellList[d.data.name]["description"]) + "<br>" +
            "Total : " + d.data.size)
          .style("left", (d3.event.pageX) + "px")
          .style("top", (d3.event.pageY - 28) + "px");
      })
      .on("mouseout", function(d) {
          mostUsedTooltipDiv.transition()
              .duration(500)
              .style("opacity", 0);
      });

  // Add spellname as text and wrap in rectangle width
  leaf.append("text")
    .attr("x", 4)
    .attr("y", 10)
    .text(d => d.data.name)
    .attr("class", d => {return d.x1 - d.x0}) // Awkwardly passing in boundingWidth as a class because I can't figure out how .call() works :(
    .call(wrap, 5);
}

function makeFullBookPage(){

  // Form data
  var columnLabels = ["Book 1", "Book 2", "Book 3", "Book 4", "Book 5", "Book 6", "Book 7"];
  var rowLabels = [];
  var bookLengths = {
    "1": 19522,
    "2": 21240,
    "3": 27395,
    "4": 44116,
    "5": 61549,
    "6": 40241,
    "7": 37337
  }
  var shortNames = {
    "Book 1": "1",
    "Book 2": "2",
    "Book 3": "3",
    "Book 4": "4",
    "Book 5": "5",
    "Book 6": "6",
    "Book 7": "7"
  }

  for (spell in spellData){
    rowLabels.push(spell);
  }

  var allSpells = formatSpellData(spellData);

  // Fill with background div
  var parentDiv = document.getElementById("page_FullBook")

  var width = parentDiv.offsetWidth - 50;
  var height = 87*20; //87 spells * 20 px for each one

  var backgroundSVG = document.createElementNS("http://www.w3.org/2000/svg", "svg");
    backgroundSVG.setAttributeNS(null, 'width', (width));
    backgroundSVG.setAttributeNS(null, 'height', (height));
    backgroundSVG.setAttribute('id', 'fullBookSVG');

  var newSquare = document.createElementNS("http://www.w3.org/2000/svg","rect");
    newSquare.setAttributeNS(null, 'width', (width));
    newSquare.setAttributeNS(null, 'height', (height));
    newSquare.setAttributeNS(null, 'fill', 'white');
    newSquare.setAttributeNS(null, 'stroke', 'white');
    newSquare.setAttributeNS(null, 'stroke-width', 3);

  backgroundSVG.appendChild(newSquare);

  parentDiv.appendChild(backgroundSVG);

  // Tooltip div
  var fullBookTooltipDiv = d3.select("body").append("div")
  .attr("class", "tooltip")
  .style("opacity", 0);

  // Set variables for treemap
  var color = d3.scaleOrdinal(d3.schemePastel1);
  var parentSVG = d3.select('#fullBookSVG');

  // Groups for table headers and body
  var tableBodyGroup = parentSVG.append('g').attr('class', 'tableBody');
  var tableHeaderGroup = parentSVG.append('g').attr('class', 'tableHeader');

  // Groups for header row and column
  var rowHeaderGroup = tableHeaderGroup.append('g').attr('class', 'rowHeader');
  var colHeaderGroup = tableHeaderGroup.append('g').attr('class', 'colHeader');

  // Cell heights and widths
  var cellWidth = width / 8;
  var cellHeight = 20;

  // Make row header
  var rowHeaderCells = rowHeaderGroup.selectAll('rect.row-header-cell')
    .data(rowLabels);

  rowHeaderCells.enter()
    .append('rect')
    .attr("class", "row-header-cell")
    .attr("width", cellWidth)
    .attr("height", cellHeight)
    .attr("x", 0)
    .attr("y", (d,i) => {return (i+1) * cellHeight})
    .attr("fill", "white");

  rowHeaderCells.enter()
    .append('text')
    .attr("class", "row-header-content")
    .attr("x", 0)
    .attr("y", (d,i) => {return (i+1) * cellHeight})
    .attr("dx", cellWidth/2)
    .attr("dy", cellHeight/2)
    .text(function(d, i){return d;})
    .attr("fill", "black")
    .attr("text-anchor", "middle");

  // Make column header
  var colHeaderCells = colHeaderGroup.selectAll('rect.col-header-cell')
    .data(columnLabels);

  colHeaderCells.enter()
    .append('rect')
    .attr("class", "col-header-cell")
    .attr("width", cellWidth)
    .attr("height", cellHeight)
    .attr("x", (d,i) => {return (i+1) * cellWidth})
    .attr("y", 0)
    .attr("fill", "white");

  colHeaderCells.enter()
    .append('text')
    .attr("class", "col-header-content")
    .attr("x", (d,i) => {return (i+1) * cellWidth})
    .attr("y", 0)
    .attr("dx", cellWidth/2)
    .attr("dy", cellHeight/2)
    .text(function(d, i){return d;})
    .attr("fill", "black")
    .attr("text-anchor", "middle");

    // Append group inside tableBodyGroup - 1 <g> for each spell
    var bodyGroups = tableBodyGroup.selectAll("g.dotsGroup")
      .data(allSpells["data"]);

    var bodyGroup = bodyGroups.enter()
      .append("g")
        .attr("class", "dotsGroup")
        .attr("id", d => {return "dotsGroup"+firstLetterUppercase(d.name)})

    // Inside each group draw circles depending on how far along each ["line"] entry is

    bodyGroup.selectAll("circle")
      .data(function(d,i) { return d["lines"] })
      .enter()
      .append("circle")
      .attr("class", d => d)
      .attr("cx", (d,i) => {
        var bookNo = Number(d[0]);
        var lineNo = d[1];
        var percentage = lineNo / bookLengths[bookNo];
        return (((bookNo)*cellWidth)+(percentage*cellWidth))
      }) //Get
      .attr("cy", d => {
        numOfDots++;
        spellHeight = incrementNumofSpell();
        return ((spellHeight*cellHeight)+(cellHeight/2))
      })
      .attr("r", (cellHeight-5)/2)
      .attr("fill", d => {return color(Number(d[0]))})
      .attr("fill-opacity", d => {return 0.6});
}

function makeTitlePage(){
  // Not currently used
  // Add in background div
  var parentDiv = document.getElementById("page_Title")

  var width = parentDiv.offsetWidth - 50;
  var height = parentDiv.offsetHeight;

  var backgroundSVG = document.createElementNS("http://www.w3.org/2000/svg", "svg");
    backgroundSVG.setAttributeNS(null, 'width', (width));
    backgroundSVG.setAttributeNS(null, 'height', (height));

  var newSquare = document.createElementNS("http://www.w3.org/2000/svg","rect");
    newSquare.setAttributeNS(null, 'width', (width));
    newSquare.setAttributeNS(null, 'height', (height));
    newSquare.setAttributeNS(null, 'fill', 'silver');

  backgroundSVG.appendChild(newSquare);

  var title = document.createElementNS("http://www.w3.org/2000/svg", "text");
    title.setAttribute("x", "50%");
    title.setAttribute("y", "50%");
    title.setAttribute("text-anchor", "middle");
    var titleText = document.createTextNode("All The Spells In The Harry Potter Books");     // Create a text node
    title.appendChild(titleText);

  backgroundSVG.appendChild(title);

  parentDiv.appendChild(backgroundSVG);
}

function makePages(){
  // makeTitlePage();
  makeClassificationPage();
  makeMostUsedPage();
  makeFullBookPage();
}
